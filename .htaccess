Options +FollowSymLinks -MultiViews
RewriteEngine On

# Handle directory trailing slashes
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*[^/])$ /$1/ [L,R=301]

# Serve index files for directory requests (PHP first, then HTML)
DirectoryIndex index.php index.html

# Remove .html extension
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.html -f
RewriteRule ^(.*)$ $1.html [NC,L]

# Remove .php extension
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php [NC,L]

# Handle 404 errors
ErrorDocument 404 /404.html 